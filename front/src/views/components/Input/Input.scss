@import '../../../assets/styles/colors.scss';
@import '../../../assets/styles/parents.scss';

.Input{
  display: inline-flex;
  position: relative;
  margin-top: .8em;
  color: #333;
  min-width: 250px;
  &.full{
    display: flex;
  }
  *{
    outline: none;
  }
  .switch{
    $swidth: 60px;
    padding: .5em 0;
    margin: 0 .7em;
    line-height: 1;
    width: $swidth;
    height: 1em;
    justify-self: center;
    display: flex;
    align-items: center;
    position: relative;
    cursor: pointer;
    &:before{
      content: '';
      color: transparent;
      width: 100%;
      height: 10px;
      border-radius: 10px;
      background: rgba($color: #000, $alpha: .3);
    }
    $radius: $swidth * .4;
    &:after{
      content: '';
      top: 50%;
      position: absolute;
      color: transparent;
      width: $radius;
      left: 7.5%;
      height: $radius;
      margin-top: -calc($radius / 2);
      border-radius: 100%;
      background: gray;
      box-shadow: 0 0 3px rgba(#fff, .3);
      transition: .2s ease;
    }
    &.active{
      &:after{
        background: $main-color;
        left: calc(92.5% - #{$radius});
      }
    }
  }
  &.input-image{  
    .bi-label{
      transform: none;
      top: 1em;
      left: 50%;
      transform: translate3d(-50%, 0, 0) !important;
      line-height: 1.2;
      color: darken($main-color, 10%);
      text-shadow: 0 0 1em #fff;
      opacity: 1 !important;
      font-size: .7em;
      display: block;
      &:before{
        content: '';
        display: block;
        position: absolute;
        top: 0; left: 0;
        right: 0; bottom: 0;
        background: red;
      }
    }
    .image-container{
      border-radius: .5em;
      overflow: hidden;
      flex: 1;
      position: relative;
      border: .4em solid #fff;
      box-shadow: 0 0 .2em #333, 0 0 .1em #333 inset;
      background-color: rgba(#fff, .5);
      background-size: cover;
      background-position: center;
      input{
        display: none;
      }
      &:after{
        content: '';
        pointer-events: none;
        display: block;
        padding-bottom: 50%;
        border-radius: .5em;
      }
      &.filled ~ .bi-label{
        display: none;
      }
      &.square{
        width: 150px;
        margin: 0 auto;
        flex: none;
        &:after{
          padding-bottom: 90%;
        }
      }
    }
    &:after{
      display: none;
    }
  }
  &.input-switch{
    align-items: center;
    justify-content: center;
    .suffix, .prefix{
      padding-top: .2em;
      color: $main-color;
      font-size: .9em;
    }
  }
  &.input-sex{
    $c0: dodgerblue;
    $c1: rgb(209, 56, 145);
    align-items: center;
    justify-content: center;
    .suffix, .prefix{
      padding-top: .2em;
      color: $c0;
      font-size: .9em;
    }
    .suffix{
      color: $c1;
    }
    .switch{
      &:after{
        background: $c0;
      }
      &.active:after{
        background: $c1;
      }
    }
  }
  >input{
    border: none;
    font-size: inherit;
    padding: .7em .5em .3em .5em;
    background: transparent;
    width: 100%;
    color: inherit;
    &.prefixed{
      padding: .7em .5em .3em .1em;
    }
    &.optioned{
      cursor: pointer;
    }
    &::-webkit-outer-spin-button, &::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    &[type=number] {
      -moz-appearance: textfield;
      text-align: right;
    }
    &[readonly]{
      cursor: pointer;
    }
  }
  .file{
    &[type="file"]{
      display: none;
    }
    border: none;
    position: relative;
    font-size: inherit;
    background: transparent;
    width: 100%;
    min-height: 1.1em;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: flex-start;
    padding: .5em .2em .2em .5em;
    gap: .1em;
    >.filename{
      flex: 1;
    }
    .empty{
      color: #555;
      font-size: .8em;
      &:before{
        content: "&";
        color: transparent;
      }
      &.empty-more{
        background: $main-color;
        border-radius: 100%;
        width: 1.5em;
        height: 1.5em;
        @extend %plus;
        margin-left: .5em;
        &:before, &::after{
          background: #fff !important;
          left: 20%;
          width: 60%;
        }
      }
    }
    input{
      display: none;
    }
    .more{
      $w: 16px;
      width: $w;
      height: $w;
      margin-left: .5em;
      box-shadow: 0 0 0 1px $main-color;
      border-radius:  75% 15%;
      position: relative;
      transform: rotate(45deg);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: background-color .2s ease;
      &:before {
        content: '';
        display: block;
        width: calc($w / 2.5) ;
        height: calc($w / 2.5);
        box-shadow: 0 0 0 1px $main-color;
        border-radius: 50%;
        background: #fff;
      }
      &:hover{
        background: $main-color;
      }
    }
    .filename{
      color: rgba($color: #555, $alpha: 1.0);
      font-size: .65em;
      background: #555;
      padding: .3em 1em;
      padding-right: 2.5em;
      border-radius: 1em;
      overflow: hidden;
      max-width: 160px;
      position: relative;
      display: flex;
      cursor: default;
      span{
        white-space: nowrap;
        line-height: 1.2;
        overflow: hidden;
        left: 1em;
        color: #fff;
        left: 0;
        text-overflow: ellipsis;
        direction: rtl;
      }
      .remove-image{
        position: absolute;
        right: 0;
        top: 0;
        height: 100% !important;
        width: 2em;
        cursor: pointer;
        @extend %close;
        &:before, &:after{
          background: #fff;
          width: 60%;
        }
      }
      &.ltr{
        span{
          direction: initial;
        }
      }
    }
    .file-list{
      position: absolute;
      z-index: 1000;
      top: 100%;
      right: 0;
      height: 4em;
      background: #fff;
      border-radius: .3em;
      box-shadow: 0 0 3px #777;
      padding: 0 .3em;
      opacity: .5;
      transform-origin: 0 0;
      transform: rotateX(90deg);
      pointer-events: none;
      transition: opacity .3s ease, transform 0s .3s linear;
      .file-list-content{
        display: flex;
        padding-right: .5em;
        flex-direction: column;
        margin: .2em 0;
        align-items: flex-end;
        gap: .1em;
      }
    }
    .more:focus-within ~ .file-list, .file-list:focus-within{
      transition: opacity .3s ease, transform 0s 0s linear;
      opacity: 1;
      pointer-events: initial;
      transform: none;
    }
  }
  .suffix{
    padding: .7em .5em .2em 0;
    line-height: 1;
    pointer-events: none;
    color: inherit;
    white-space: nowrap;
  }
  .prefix{
    padding: .7em .2em .3em .5em;
    line-height: 1;
    pointer-events: none;
    color: inherit;
    white-space: nowrap;
  }
  &:after{
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    opacity: .8;
    transition: opacity .3s ease;
    color: inherit;
    font-family: inherit;
    pointer-events: none;
  }
  &.outline-normal:after{
    border-top: 1px solid $main-color;
  }
  &.outline-full:after{
    top: 0;
    border: 1px solid $main-color;
  }

  &.outline-full-rounded:after{
    top: 0;
    border: 1px solid $main-color;
    border-radius: .3em;
  }
  
  .bi-label{
    position: absolute;
    color: rgba($main-color, .8);
    bottom: 100%;
    left: 0;
    transform-origin: 0 100%;
    transform: translate3d(.5em, 1.7em, 0);
    transition: transform .2s ease;
    line-height: 1;
    pointer-events: none;
    white-space: nowrap;
    display: flex;
    .fake-prefix{
      transition: font-size .2s ease;
      color: transparent;
      margin-right: .3em;
    }
  }
  &.required{
    .bi-label:after{
      content: "*";
      margin-left: 3px;
    }
  }
  &:focus-within, &.active{
    &:focus-within{
      &:after{
        opacity: 1;
        border-width: 2px;
        box-shadow: 0 0 1px $main-color;
      }
    }
    .bi-label{
      transform: scale(.75);
      opacity: 1;
      .fake-prefix{
        font-size: 0;
      }
    }
    .suffix, .prefix{ 
      opacity: 1;
    }
  }
  &.list{
    &:before{
      content: '';
      pointer-events: none;
      position: absolute;
      border-color: inherit;
      border-width: 0 0 2px 2px;
      border-style: solid;
      width: 7px;
      height: 7px;
      transform: rotate(-45deg);
      position: absolute;
      right: 0;
      top: 50%;
      margin-top: -5px;
    }
    input{
      padding-right: 1em;
    }
    .bi-options{
      display: flex;
      height: auto;
      z-index: 1;
      flex-wrap: wrap;
      position: absolute;
      top: 100%;
      margin-top: .2em;
      right: .5em;
      background: #fff;
      border-radius: .3em;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(51, 51, 51, 0.452);
      opacity: 0;
      visibility: hidden;
      transition: opacity .2s ease, visibility 0s .2s linear;
      filter: blur(3px);
      width: 150px;
      &.centered{
        right: 50%;
        transform: rotateX(90deg) translate3d(50%, 0, 0);
      }
      &.colored{
        .bi-option{
          border-radius: 7px;
          text-align: center;
          &:before{
            display: none;
          }
          &.active{
            background: rgba($main-color, .5);
            color: #fff;
            &:hover{
              background: rgba($main-color, .7);
            }
          }
        }
      }
      .bi-option{
        font-size: .95em;
        background: transparent;
        border: none;
        text-align: left;
        padding: .5em;
        line-height: 1;
        position: relative;
        cursor: pointer;
        width: 100%;
        box-sizing: border-box;
        &:hover{
          background: rgba($main-color, .7);
          color: #fff;
          &:before{
            filter: brightness(0) invert(1) drop-shadow(0 0 2px gray);
          }
        }
        &.active:before{
          content: '';
          pointer-events: none;
          position: absolute;
          border-color: $main-color;
          border-width: 0 0 2px 2px;
          border-style: solid;
          width: 11px;
          height: 5px;
          transform: rotate(-45deg);
          position: absolute;
          right: 5px;
          top: 50%;
          margin-top: -5px;
        }
      }
    }
    &:focus-within{
      .bi-options{
        transform: none;
        opacity: 1;
        visibility: visible;
        transition: opacity .2s ease, visibility 0s linear;
        filter: none;
        &.centered{
          transform: translate3d(50%, 0, 0);
        }
      }
    }
  }
  &.input-date{
    justify-content: center;
    .Hour{
      background: transparent;
      box-shadow: none;
      width: 200px;
      .bi-label{
        display: none;
      }
      .bi-options{
        transform: translate3d(50%, -50%, 0) !important;
      }
      input{
        background-color: transparent;
      }
      .date{
        width: 40px;
      }
    }
  }
  &.error{
    $red: rgb(238, 99, 99);
    .bi-label{
      color: $red !important;
    }
    &:after{
      border-color: $red;
    }
    >input{
      color: $red;
    }
  }
}